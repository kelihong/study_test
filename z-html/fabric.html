<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        background: pink;
      }
      canvas {
        border: 1px solid grey;
      }
    </style>
  </head>

  <body>
    <canvas id="test" width="500" height="500"></canvas>
    <script src="/static/js/fabric.min.js"></script>

    <script>
      let canvas = new fabric.Canvas("test", {
        preserveObjectStacking: true, // 添加图层时自动固定图层zindex, 不随着点击而提升层级
        centeredScaling: true, // 居中拉伸
      });

      // 设置背景颜色
      // canvas.setBackgroundColor("rgba(1,2,3,0.8)", function () {
      //   // canvas.renderAll();
      // });

      let img = canvas.toDataURL();
      console.log(img);
      // //   设置背景图片
      // canvas.setBackgroundColor(
      //   {
      //     source: "http://fabricjs.com/assets/escheresque_ste.png",
      //   },
      //   canvas.renderAll.bind(canvas)
      // );
      // canvas.setBackgroundColor(
      //   {
      //     source: "http://fabricjs.com/assets/escheresque_ste.png",
      //     repeat: "repeat-x",
      //     offsetX: 100,
      //     offsetY: 10,
      //   },
      //   canvas.renderAll.bind(canvas)
      // );
      // canvas.setBackgroundColor(
      //   {
      //     source: "http://fabricjs.com/assets/escheresque_ste.png",
      //     repeat: "repeat-x",
      //     offsetX: 200,
      //     offsetY: 100,
      //   },
      //   canvas.renderAll.bind(canvas)
      // );
      

      canvas.setBackgroundImage(
        "http://localhost:8888/group1/M00/00/0F/wKhYI2BPfKeAAiLPAASmjPtUcCk515.jpg",
        canvas.renderAll.bind(canvas),
        {
          width: canvas.width,
          height: canvas.height,
          // Needed to position backgroundImage at 0/0
          originX: "left",
          originY: "top",
          left: 11,
          top: 100,
        }
      );
      canvas.setBackgroundImage(
        "http://localhost:8888/group1/M00/00/0F/wKhYI2BPfKeAAiLPAASmjPtUcCk515.jpg",
        canvas.renderAll.bind(canvas),
        {
          width: canvas.width,
          height: canvas.height,
          // Needed to position backgroundImage at 0/0
          originX: "left",
          originY: "top",
          left: 11,
          top: 200,
        }
      );
    </script>
  </body>
</html>
